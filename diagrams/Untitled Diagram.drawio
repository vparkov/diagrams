<mxfile host="app.diagrams.net" modified="2021-10-26T11:30:59.275Z" agent="5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/94.0.4606.81 Safari/537.36" etag="IuqyXyoLkNP7ZVAeMtIU" version="15.5.9" type="github">
  <diagram id="F9UEY97SaONHXh3VanCo" name="Page-1">
    <mxGraphModel dx="1422" dy="1900" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="W5R927IYdIvkTo_1wjr3-158" value="" style="whiteSpace=wrap;html=1;aspect=fixed;" vertex="1" parent="1">
          <mxGeometry x="1110" y="2290" width="440" height="440" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-4" value="" style="whiteSpace=wrap;html=1;aspect=fixed;" vertex="1" parent="1">
          <mxGeometry x="40" y="10" width="440" height="440" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-1" value="" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" vertex="1" parent="1">
          <mxGeometry x="215" y="72.5" width="110" height="110" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-2" value="Client: 1&lt;br&gt;Table: 35&lt;br&gt;Site:2&lt;br&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="240" y="107.5" width="60" height="45" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-9" value="" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" vertex="1" parent="1">
          <mxGeometry x="215" y="197.5" width="110" height="110" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-5" value="Client: 2&lt;br&gt;Table: 35&lt;br&gt;Site:2" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="240" y="230" width="60" height="45" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-11" value="" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" vertex="1" parent="1">
          <mxGeometry x="215" y="320" width="110" height="110" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-6" value="Client: 3&lt;br&gt;Table: 35&lt;br&gt;Site:2" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="240" y="352.5" width="60" height="45" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-12" value="" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" vertex="1" parent="1">
          <mxGeometry x="55" y="105" width="110" height="110" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-7" value="Client: 4&lt;br&gt;Table: 36 Site:2" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="80" y="137.5" width="60" height="45" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-13" value="" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" vertex="1" parent="1">
          <mxGeometry x="55" y="230" width="110" height="110" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-8" value="Client: 5&lt;br&gt;Table: 36&lt;br&gt;Site:2" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="80" y="262.5" width="60" height="45" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-14" value="Frontend&lt;br&gt;frankiebennys.com" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="187.5" y="20" width="155" height="30" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-15" value="" style="whiteSpace=wrap;html=1;aspect=fixed;" vertex="1" parent="1">
          <mxGeometry x="580" y="10" width="440" height="440" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-16" value="Backend&lt;br&gt;ts-gateway" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="740" y="20" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-23" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;exitPerimeter=0;" edge="1" parent="1" source="W5R927IYdIvkTo_1wjr3-17" target="W5R927IYdIvkTo_1wjr3-19">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-17" value="" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.database;whiteSpace=wrap;" vertex="1" parent="1">
          <mxGeometry x="620" y="262.5" width="160" height="160" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-18" value="DynamoDB" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="670" y="352.5" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-19" value="Connections" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;" vertex="1" parent="1">
          <mxGeometry x="605" y="470" width="190" height="90" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-20" value="connection id - PK" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;" vertex="1" parent="W5R927IYdIvkTo_1wjr3-19">
          <mxGeometry y="30" width="190" height="30" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-21" value="tableId(siteId-tableId) - GSI" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;" vertex="1" parent="W5R927IYdIvkTo_1wjr3-19">
          <mxGeometry y="60" width="190" height="30" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-37" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="W5R927IYdIvkTo_1wjr3-25" target="W5R927IYdIvkTo_1wjr3-17">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-25" value="" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" vertex="1" parent="1">
          <mxGeometry x="620" y="87.5" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-26" value="connect" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="630" y="112.5" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-29" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="W5R927IYdIvkTo_1wjr3-1" target="W5R927IYdIvkTo_1wjr3-25">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-34" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="W5R927IYdIvkTo_1wjr3-9">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="340" y="270" as="sourcePoint" />
            <mxPoint x="610" y="130" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-36" value="" style="endArrow=classic;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" target="W5R927IYdIvkTo_1wjr3-25">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="325" y="367.5" as="sourcePoint" />
            <mxPoint x="375" y="317.5" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-38" value="&lt;b&gt;1. Connect to websocket&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="425" y="-40" width="187" height="30" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-39" value="" style="whiteSpace=wrap;html=1;aspect=fixed;" vertex="1" parent="1">
          <mxGeometry x="70" y="680" width="440" height="440" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-40" value="" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" vertex="1" parent="1">
          <mxGeometry x="245" y="742.5" width="110" height="110" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-41" value="Client: 1&lt;br&gt;Table: 35&lt;br&gt;Site:2&lt;br&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="270" y="777.5" width="60" height="45" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-42" value="" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" vertex="1" parent="1">
          <mxGeometry x="245" y="867.5" width="110" height="110" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-43" value="Client: 2&lt;br&gt;Table: 35&lt;br&gt;Site:2" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="270" y="900" width="60" height="45" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-44" value="" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" vertex="1" parent="1">
          <mxGeometry x="245" y="990" width="110" height="110" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-45" value="Client: 3&lt;br&gt;Table: 35&lt;br&gt;Site:2" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="270" y="1022.5" width="60" height="45" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-46" value="" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" vertex="1" parent="1">
          <mxGeometry x="85" y="775" width="110" height="110" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-47" value="Client: 4&lt;br&gt;Table: 36 Site:2" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="110" y="807.5" width="60" height="45" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-48" value="" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" vertex="1" parent="1">
          <mxGeometry x="85" y="900" width="110" height="110" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-49" value="Client: 5&lt;br&gt;Table: 36&lt;br&gt;Site:2" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="110" y="932.5" width="60" height="45" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-50" value="Frontend&lt;br&gt;frankiebennys.com" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="217.5" y="690" width="155" height="30" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-51" value="" style="whiteSpace=wrap;html=1;aspect=fixed;" vertex="1" parent="1">
          <mxGeometry x="610" y="680" width="440" height="440" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-52" value="Backend&lt;br&gt;ts-gateway" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="770" y="690" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-53" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;exitPerimeter=0;" edge="1" parent="1" source="W5R927IYdIvkTo_1wjr3-54" target="W5R927IYdIvkTo_1wjr3-56">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-70" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.468;entryY=-0.033;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="W5R927IYdIvkTo_1wjr3-54" target="W5R927IYdIvkTo_1wjr3-66">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-54" value="" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.database;whiteSpace=wrap;" vertex="1" parent="1">
          <mxGeometry x="650" y="932.5" width="160" height="160" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-55" value="DynamoDB" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="700" y="1022.5" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-56" value="Connections" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;" vertex="1" parent="1">
          <mxGeometry x="635" y="1140" width="190" height="120" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-57" value="connection id - PK" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;" vertex="1" parent="W5R927IYdIvkTo_1wjr3-56">
          <mxGeometry y="30" width="190" height="30" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-58" value="tableId(siteId-tableId) - GSI" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;" vertex="1" parent="W5R927IYdIvkTo_1wjr3-56">
          <mxGeometry y="60" width="190" height="30" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-76" value="committedAmount" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;" vertex="1" parent="W5R927IYdIvkTo_1wjr3-56">
          <mxGeometry y="90" width="190" height="30" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-59" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="W5R927IYdIvkTo_1wjr3-60" target="W5R927IYdIvkTo_1wjr3-54">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-60" value="" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" vertex="1" parent="1">
          <mxGeometry x="650" y="757.5" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-61" value="Update Remaining Balance" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="660" y="782.5" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-62" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="W5R927IYdIvkTo_1wjr3-40" target="W5R927IYdIvkTo_1wjr3-60">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-63" value="" style="endArrow=none;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;startArrow=classic;startFill=1;endFill=0;" edge="1" parent="1" source="W5R927IYdIvkTo_1wjr3-42">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="370" y="940" as="sourcePoint" />
            <mxPoint x="640" y="800" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-64" value="" style="endArrow=none;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;endFill=0;startArrow=classic;startFill=1;" edge="1" parent="1" target="W5R927IYdIvkTo_1wjr3-60">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="355" y="1037.5" as="sourcePoint" />
            <mxPoint x="405" y="987.5" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-65" value="&lt;b&gt;2. Enter Split Bill journey&lt;br&gt;(send updated price to the connected clients)&lt;br&gt;&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="425" y="620" width="295" height="30" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-66" value="Table Details" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;" vertex="1" parent="1">
          <mxGeometry x="840" y="1140" width="190" height="120" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-67" value="tableId(siteId-tableId) - PK" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;" vertex="1" parent="W5R927IYdIvkTo_1wjr3-66">
          <mxGeometry y="30" width="190" height="30" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-68" value="total" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;" vertex="1" parent="W5R927IYdIvkTo_1wjr3-66">
          <mxGeometry y="60" width="190" height="30" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-72" value="remainingBalance" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;" vertex="1" parent="W5R927IYdIvkTo_1wjr3-66">
          <mxGeometry y="90" width="190" height="30" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-73" value="&lt;b&gt;PUT&amp;nbsp;&lt;/b&gt;/balance/update" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="370" y="750" width="140" height="42.5" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-74" value="Update Remaining Balance" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="425" y="837.5" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-75" value="Update Remaining Balance" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="425" y="902.5" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-79" value="&lt;h1&gt;&lt;br&gt;&lt;/h1&gt;&lt;p&gt;Client sends &#39;update remaining balance&#39; event to the back end. The backend will update the committedAmount in the connections table and reduce the remainingBalance in the table details table.&lt;br&gt;The backend will then send an event to every connection with the updated remainingBalance&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="180" y="1140" width="220" height="200" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-80" value="" style="whiteSpace=wrap;html=1;aspect=fixed;" vertex="1" parent="1">
          <mxGeometry x="90" y="1470" width="440" height="440" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-81" value="" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" vertex="1" parent="1">
          <mxGeometry x="265" y="1532.5" width="110" height="110" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-82" value="Client: 1&lt;br&gt;Table: 35&lt;br&gt;Site:2&lt;br&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="290" y="1567.5" width="60" height="45" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-83" value="" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" vertex="1" parent="1">
          <mxGeometry x="265" y="1657.5" width="110" height="110" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-84" value="Client: 2&lt;br&gt;Table: 35&lt;br&gt;Site:2" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="290" y="1690" width="60" height="45" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-85" value="" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" vertex="1" parent="1">
          <mxGeometry x="265" y="1780" width="110" height="110" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-86" value="Client: 3&lt;br&gt;Table: 35&lt;br&gt;Site:2" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="290" y="1812.5" width="60" height="45" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-87" value="" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" vertex="1" parent="1">
          <mxGeometry x="105" y="1565" width="110" height="110" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-88" value="Client: 4&lt;br&gt;Table: 36 Site:2" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="130" y="1597.5" width="60" height="45" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-89" value="" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" vertex="1" parent="1">
          <mxGeometry x="105" y="1690" width="110" height="110" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-90" value="Client: 5&lt;br&gt;Table: 36&lt;br&gt;Site:2" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="130" y="1722.5" width="60" height="45" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-91" value="Frontend&lt;br&gt;frankiebennys.com" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="237.5" y="1480" width="155" height="30" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-92" value="" style="whiteSpace=wrap;html=1;aspect=fixed;" vertex="1" parent="1">
          <mxGeometry x="630" y="1470" width="440" height="440" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-93" value="Backend&lt;br&gt;ts-gateway" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="790" y="1480" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-94" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;exitPerimeter=0;" edge="1" parent="1" source="W5R927IYdIvkTo_1wjr3-96" target="W5R927IYdIvkTo_1wjr3-98">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-95" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.468;entryY=-0.033;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="W5R927IYdIvkTo_1wjr3-96" target="W5R927IYdIvkTo_1wjr3-109">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-96" value="" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.database;whiteSpace=wrap;" vertex="1" parent="1">
          <mxGeometry x="670" y="1722.5" width="160" height="160" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-97" value="DynamoDB" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="720" y="1812.5" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-98" value="Connections" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;" vertex="1" parent="1">
          <mxGeometry x="655" y="1930" width="190" height="120" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-99" value="connection id - PK" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;" vertex="1" parent="W5R927IYdIvkTo_1wjr3-98">
          <mxGeometry y="30" width="190" height="30" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-100" value="tableId(siteId-tableId) - GSI" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;" vertex="1" parent="W5R927IYdIvkTo_1wjr3-98">
          <mxGeometry y="60" width="190" height="30" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-101" value="committedAmount" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;" vertex="1" parent="W5R927IYdIvkTo_1wjr3-98">
          <mxGeometry y="90" width="190" height="30" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-102" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="W5R927IYdIvkTo_1wjr3-103" target="W5R927IYdIvkTo_1wjr3-96">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-103" value="" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" vertex="1" parent="1">
          <mxGeometry x="670" y="1547.5" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-104" value="&lt;span style=&quot;text-align: left; font-size: 10px;&quot;&gt;recordPayment&lt;/span&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="690" y="1580" width="40" height="17.5" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-105" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="W5R927IYdIvkTo_1wjr3-81" target="W5R927IYdIvkTo_1wjr3-103">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-106" value="" style="endArrow=none;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;startArrow=classic;startFill=1;endFill=0;" edge="1" parent="1" source="W5R927IYdIvkTo_1wjr3-83">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="390" y="1730" as="sourcePoint" />
            <mxPoint x="660" y="1590" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-107" value="" style="endArrow=none;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;endFill=0;startArrow=classic;startFill=1;" edge="1" parent="1" target="W5R927IYdIvkTo_1wjr3-103">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="375" y="1827.5" as="sourcePoint" />
            <mxPoint x="425" y="1777.5" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-108" value="&lt;b&gt;3. Make Split Payment&lt;/b&gt;&lt;br&gt;&lt;b&gt;(transaction is sent to the TableService)&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="445" y="1410" width="295" height="30" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-109" value="Table Details" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;" vertex="1" parent="1">
          <mxGeometry x="860" y="1930" width="190" height="120" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-110" value="tableId(siteId-tableId) - PK" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;" vertex="1" parent="W5R927IYdIvkTo_1wjr3-109">
          <mxGeometry y="30" width="190" height="30" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-111" value="total" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;" vertex="1" parent="W5R927IYdIvkTo_1wjr3-109">
          <mxGeometry y="60" width="190" height="30" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-112" value="remainingBalance" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;" vertex="1" parent="W5R927IYdIvkTo_1wjr3-109">
          <mxGeometry y="90" width="190" height="30" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-113" value="&lt;b&gt;POST&amp;nbsp;&lt;/b&gt;.../basket/{basket}/pay" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="430" y="1547.5" width="140" height="42.5" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-114" value="Update Remaining Balance" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="445" y="1627.5" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-115" value="Update Remaining Balance" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="445" y="1692.5" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-116" value="&lt;h1&gt;&lt;br&gt;&lt;/h1&gt;&lt;p&gt;Client sends &#39;recordPayment&#39; request to the ts-gateway API. It will attempt to make a transaction to the&amp;nbsp;TableService.&lt;/p&gt;&lt;p&gt;If the request to the TableService is unsuccessful, get the committed amount and add it to the remainingBalance(revert the payment). Then send an event to all connected users with the updated remainingBlance. Disconnect the user and delete the record in the connections table.&lt;/p&gt;&lt;p&gt;If the request to the TableService is successful, then disconnect the user and delete the record in the connections table.&lt;br&gt;&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="120" y="1880" width="220" height="330" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-117" value="" style="whiteSpace=wrap;html=1;aspect=fixed;" vertex="1" parent="1">
          <mxGeometry x="105" y="2290" width="440" height="440" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-118" value="" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" vertex="1" parent="1">
          <mxGeometry x="280" y="2352.5" width="110" height="110" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-119" value="Client: 1&lt;br&gt;Table: 35&lt;br&gt;Site:2&lt;br&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="305" y="2387.5" width="60" height="45" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-120" value="" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" vertex="1" parent="1">
          <mxGeometry x="280" y="2477.5" width="110" height="110" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-121" value="Client: 2&lt;br&gt;Table: 35&lt;br&gt;Site:2" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="305" y="2510" width="60" height="45" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-122" value="" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" vertex="1" parent="1">
          <mxGeometry x="280" y="2600" width="110" height="110" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-123" value="Client: 3&lt;br&gt;Table: 35&lt;br&gt;Site:2" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="305" y="2632.5" width="60" height="45" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-124" value="" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" vertex="1" parent="1">
          <mxGeometry x="120" y="2385" width="110" height="110" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-125" value="Client: 4&lt;br&gt;Table: 36 Site:2" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="145" y="2417.5" width="60" height="45" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-126" value="" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" vertex="1" parent="1">
          <mxGeometry x="120" y="2510" width="110" height="110" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-127" value="Client: 5&lt;br&gt;Table: 36&lt;br&gt;Site:2" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="145" y="2542.5" width="60" height="45" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-128" value="Frontend&lt;br&gt;frankiebennys.com" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="252.5" y="2300" width="155" height="30" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-129" value="" style="whiteSpace=wrap;html=1;aspect=fixed;" vertex="1" parent="1">
          <mxGeometry x="645" y="2290" width="440" height="440" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-130" value="Backend&lt;br&gt;ts-gateway" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="805" y="2300" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-131" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;exitPerimeter=0;" edge="1" parent="1" source="W5R927IYdIvkTo_1wjr3-133" target="W5R927IYdIvkTo_1wjr3-135">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-132" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.468;entryY=-0.033;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="W5R927IYdIvkTo_1wjr3-133" target="W5R927IYdIvkTo_1wjr3-146">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-133" value="" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.database;whiteSpace=wrap;" vertex="1" parent="1">
          <mxGeometry x="685" y="2542.5" width="160" height="160" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-134" value="DynamoDB" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="735" y="2632.5" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-135" value="Connections" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;" vertex="1" parent="1">
          <mxGeometry x="670" y="2750" width="190" height="120" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-136" value="connection id - PK" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;" vertex="1" parent="W5R927IYdIvkTo_1wjr3-135">
          <mxGeometry y="30" width="190" height="30" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-137" value="tableId(siteId-tableId) - GSI" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;" vertex="1" parent="W5R927IYdIvkTo_1wjr3-135">
          <mxGeometry y="60" width="190" height="30" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-138" value="committedAmount" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;" vertex="1" parent="W5R927IYdIvkTo_1wjr3-135">
          <mxGeometry y="90" width="190" height="30" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-139" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="W5R927IYdIvkTo_1wjr3-140" target="W5R927IYdIvkTo_1wjr3-133">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-159" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=1;exitDx=0;exitDy=0;fontSize=12;startArrow=none;startFill=0;endArrow=classic;endFill=1;" edge="1" parent="1" source="W5R927IYdIvkTo_1wjr3-140" target="W5R927IYdIvkTo_1wjr3-157">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-140" value="" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" vertex="1" parent="1">
          <mxGeometry x="685" y="2367.5" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-141" value="update table details" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="695" y="2392.5" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-142" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;startArrow=classic;startFill=1;endArrow=none;endFill=0;" edge="1" parent="1" source="W5R927IYdIvkTo_1wjr3-118" target="W5R927IYdIvkTo_1wjr3-140">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-143" value="" style="endArrow=none;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;startArrow=classic;startFill=1;endFill=0;" edge="1" parent="1" source="W5R927IYdIvkTo_1wjr3-120">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="405" y="2550" as="sourcePoint" />
            <mxPoint x="675" y="2410" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-144" value="" style="endArrow=none;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;endFill=0;startArrow=classic;startFill=1;" edge="1" parent="1" target="W5R927IYdIvkTo_1wjr3-140">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="390" y="2647.5" as="sourcePoint" />
            <mxPoint x="440" y="2597.5" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-145" value="&lt;b&gt;4. Revert committed amount for users that have timed out&lt;/b&gt;&lt;br&gt;&lt;b&gt;(the user started the split bill journey, but didn&#39;t complete it in time - closed the browser, exited the page or just went idle)&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="460" y="2190" width="370" height="70" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-146" value="Table Details" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;" vertex="1" parent="1">
          <mxGeometry x="875" y="2750" width="190" height="120" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-147" value="tableId(siteId-tableId) - PK" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;" vertex="1" parent="W5R927IYdIvkTo_1wjr3-146">
          <mxGeometry y="30" width="190" height="30" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-148" value="total" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;" vertex="1" parent="W5R927IYdIvkTo_1wjr3-146">
          <mxGeometry y="60" width="190" height="30" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-149" value="remainingBalance" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;" vertex="1" parent="W5R927IYdIvkTo_1wjr3-146">
          <mxGeometry y="90" width="190" height="30" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-151" value="Update Remaining Balance" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="460" y="2447.5" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-152" value="Update Remaining Balance" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="460" y="2512.5" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-153" value="&lt;h1&gt;&lt;br&gt;&lt;/h1&gt;&lt;p&gt;Client sends &#39;recordPayment&#39; request to the ts-gateway API. It will attempt to make a transaction to the&amp;nbsp;TableService.&lt;/p&gt;&lt;p&gt;If the request to the TableService is unsuccessful, get the committed amount and add it to the remainingBalance(revert the payment). Then send an event to all connected users with the updated remainingBlance. Disconnect the user and delete the record in the connections table.&lt;/p&gt;&lt;p&gt;If the request to the TableService is successful, then disconnect the user and delete the record in the connections table.&lt;br&gt;&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="135" y="2700" width="220" height="330" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-154" value="Update Remaining Balance" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="478.5" y="2367.5" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-156" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;fontSize=12;startArrow=none;startFill=0;endArrow=classic;endFill=1;" edge="1" parent="1" source="W5R927IYdIvkTo_1wjr3-155" target="W5R927IYdIvkTo_1wjr3-140">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-155" value="&lt;font style=&quot;font-size: 12px&quot;&gt;Cloudwatch rule executed every minute.&lt;/font&gt;" style="shape=hexagon;perimeter=hexagonPerimeter2;whiteSpace=wrap;html=1;fixedSize=1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="860" y="2370" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-157" value="iOrder Table Service" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" vertex="1" parent="1">
          <mxGeometry x="1160" y="2492.5" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-160" value="3rd Party Services" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="1270" y="2310" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="W5R927IYdIvkTo_1wjr3-161" value="GetAccountBreakdown for every table that is in &#39;progress&#39;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="990" y="2460" width="80" height="30" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
